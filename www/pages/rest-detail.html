<template>
  <div class="page no-navbar" data-name="restDetail">
    <div class="page-content">
      <div class="swiper-container main-top-slider swiper-init">
        <div class="swiper-wrapper">
          <div class="swiper-slide main-top-slide">
            <div class="main-top-slide-context">
              <span class="main-top-slide-title">Неделя томатов на рынке1</span>
              <div class="main-top-slide-data-wrap circe">
                <span class="main-top-slide-data-prefix">Только</span>
                <span class="main-top-slide-data-title">01.10</span>
              </div>
            </div>
            <img src="img/beer-slider-2.png" class="main-top-slider-bg" alt="">
          </div>
          <div class="swiper-slide main-top-slide">
            <div class="main-top-slide-context">
              <span class="main-top-slide-title">Пивной день на рынке1</span>
              <div class="main-top-slide-data-wrap circe">
                <span class="main-top-slide-data-prefix">Только</span>
                <span class="main-top-slide-data-title">02.10</span>
              </div>
            </div>
            <img src="img/tomats.png" class="main-top-slider-bg" alt="">
          </div>
          <div class="swiper-slide main-top-slide">
            <div class="main-top-slide-context">
              <span class="main-top-slide-title">Неделя сыров на рынке1</span>
              <div class="main-top-slide-data-wrap circe">
                <span class="main-top-slide-data-prefix">Только</span>
                <span class="main-top-slide-data-title">03.10</span>
              </div>
            </div>
            <img src="img/markets-block.png" class="main-top-slider-bg" alt="">
          </div>
        </div>
      </div>

      <div class="rest-detail__logo-container">
        <div class="rest-detail__logo-item">
          <img src="img/logo-rest-1.png" alt="">
        </div>
        <div class="rest-detail__logo-item">
          <img src="img/logo-rest-2.png" alt="">
        </div>
      </div>

      <div class="subnavbarCurrent subnavbar-after-header no-shadow no-hairline">
        <div class="subnavbar-inner">
          <div class="segmented segmented-raised">
            <a href="#" class="tabButton1 button tab-link tab-link-active" data-tab=".tab1{{ending}}">Ресторан</a>
            <a href="#" class="tabButton2 button tab-link" data-tab=".tab2{{ending}}">Меню</a>
            <a href="#" class="tabButton3 button tab-link" data-tab=".tab3{{ending}}">Адрес</a>
          </div>
        </div>
      </div>

      <div class="tabs">
        <div class="tab tab1{{ending}} tab-active" id="">
          <div class="rest-content-tab tab-1">
            <div class="rest-image">
              <img src="./img/markets-block.png" alt="">
            </div>
            <div class="title-h2 circe">
              <span class="strong">restDetail.titleStrong {{product}}</span>
              <span class="light">restDetail.titleLight {{firstName}}</span>
            </div>
            <div class="rest-article circe">
              Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat.
              Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum.
            </div>
            <div class="rest-tags">
              Lorem ipsum dolor sit amet, consectetur adipisicing elit. Similique aliquid esse minus voluptatem dignissimos ad, hic magni veniam soluta molestias. Tenetur architecto ex laudantium, accusamus est quod cupiditate nihil sapiente.
              <20></20>
            </div>
            <div class="rest-line"></div>
            <div class="title-h3 circe">
              <span class="strong">restDetail.titleStrong</span>
              <span class="light">restDetail.titleLight</span>
            </div>
            <div class="rest-note-wrapper">
              <div class="rest-note">
                Lorem ipsum dolor sit amet, consectetur adipisicing elit.
              </div>
              <div class="rest-note">
                Lorem ipsum dolor sit amet,
              </div>
            </div>
            <div class="rest-cook-image">
              <img src="./img/markets-block.png" alt="">
            </div>
          </div>
        </div>


        <div class="tab tab2{{ending}}" id="">
          <div class="rest-content-tab">
            <div class="title-h3 circe">
              <span class="strong">Наши блюда</span>
            </div>
          </div>
          <div class="swiper-container menu-swiper swiper-init" data-space-between="10" data-slides-per-view="auto" data-free-mode="true">
            <div class="swiper-wrapper">
              <div class="swiper-slide">
                <a class="block__item block__item-menu" href="#">
                  <div class="block-image">
                    <img src="./img/markets-block.png" alt="">
                  </div>
                  <div class="block-context circe">
                    <span class="block-context-title strong black-color">title</span>
                    <span class="block-context-text black-color">price</span>
                  </div>
                </a>
              </div>
              <div class="swiper-slide">
                <a class="block__item block__item-menu" href="#">
                  <div class="block-image">
                    <img src="./img/markets-block.png" alt="">
                  </div>
                  <div class="block-context circe">
                    <span class="block-context-title strong black-color">title</span>
                    <span class="block-context-text black-color">price</span>
                  </div>
                </a>
              </div>
              <div class="swiper-slide">
                <a class="block__item block__item-menu" href="#">
                  <div class="block-image">
                    <img src="./img/markets-block.png" alt="">
                  </div>
                  <div class="block-context circe">
                    <span class="block-context-title strong black-color">title</span>
                    <span class="block-context-text black-color">price</span>
                  </div>
                </a>
              </div>
              <div class="swiper-slide">
                <a class="block__item block__item-menu" href="#">
                  <div class="block-image">
                    <img src="./img/markets-block.png" alt="">
                  </div>
                  <div class="block-context circe">
                    <span class="block-context-title strong black-color">title</span>
                    <span class="block-context-text black-color">price</span>
                  </div>
                </a>
              </div>
            </div>
          </div>
          <div class="rest-line"></div>
          <div class="rest-content-tab">
              <span class="menu-list-name circe">Выпечка</span>
            <ul class="menu-list circe">
              <li class="menu-item">
                <div class="menu-item-dish light">
                  Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor
                </div>
                <div class="menu-item-price bold">
                  price
                </div>
              </li>
              <li class="menu-item">
                <div class="menu-item-dish light">
                  Lorem ipsum dolor sit amet, consectetur adipisicing elit. Beatae, enim.
                </div>
                <div class="menu-item-price bold">
                  price
                </div>
              </li>
              <li class="menu-item">
                <div class="menu-item-dish light">
                  dish
                </div>
                <div class="menu-item-price bold">
                  price
                </div>
              </li>
              <li class="menu-item">
                <div class="menu-item-dish light">
                  Lorem ipsum dolor sit amet, consectetur adipisicing elit. Doloribus fuga rerum totam nostrum similique officia.
                </div>
                <div class="menu-item-price bold">
                  price
                </div>
              </li>
              <li class="menu-item">
                <div class="menu-item-dish light">
                  Lorem ipsum dolor sit amet, consectetur.
                </div>
                <div class="menu-item-price bold">
                  price
                </div>
              </li>
              <li class="menu-item">
                <div class="menu-item-dish light">
                  dish
                </div>
                <div class="menu-item-price bold">
                  price
                </div>
              </li>
            </ul>
            <span class="menu-list-name circe">Супы</span>
          <ul class="menu-list circe">
            <li class="menu-item">
              <div class="menu-item-dish light">
                dish
              </div>
              <div class="menu-item-price bold">
                price
              </div>
            </li>
            <li class="menu-item">
              <div class="menu-item-dish light">
                dish
              </div>
              <div class="menu-item-price bold">
                price
              </div>
            </li>
            <li class="menu-item">
              <div class="menu-item-dish light">
                dish
              </div>
              <div class="menu-item-price bold">
                price
              </div>
            </li>
          </ul>
          </div>
        </div>
        <div class="tab tab3{{ending}}" id="">
          <div class="rest-content-tab">
              <div class="rest-map">
                  <span class="rest-map-title circe">Павильон №7</span>
                  <a href="#" class="rest-map-site circe">robertburns.pub</a>
                  <a href="tel:+84953239301" class="rest-map-tel circe">8 (495) 323-93-01</a>
                  <a href="#" class="rest-map-btn">Отправить сообщение<i class="arrow-next-black"></i></a>
              </div>
          </div>
          <div class="rest-map-image">
              <a class="link dynamic-popup" data-ignore-cache="true" data-id="3" href="#">
                  <img src="img/rest-img.png" alt="">
              </a>
          </div>
        </div>
      </div>
      <div class="main-blocks light">
        <div class="main-block__heading main-block__heading-com light">
          <span class="block__heading-name">Способы связи</span>
        </div>
        <div class="circe">
          <span class="communication light">ул. Лесная, 20, с 09:00 до 22:00</span>
          <span class="communication light">8 (800) 999 88 77 / depo@mail.ru</span>
          <!-- <a href="#" class="communication-link light">depomoskva.ru</a> -->
          <button class="communication-btn light" type="button">Обратная связь</button>
          <span class="communication-s">Как добраться?</span>
        </div>
      </div>
      <div class="list virtual-list virtual-list-vdom media-list tooltip_templates">
          <ul>
            {{#each item}}
            <li>
              <div id="corner-{{id}}" class="description">
                <a class="baloon-heading" href="#">
                  <div class="baloon-heading__left">
                    <img src="img/map-logo.png" alt="">
                  </div>
                  <div class="baloon-heading__right">
                    <span class="baloon-heading-title">{{rest}}</span>
                    <span class="baloon-heading-text">{{concept}}</span>
                  </div>
                </a>
                <div class="baloon-body circe">
                  <div class="baloon-body-row">
                    <i class="baloon-icon-placemark baloon-icon"></i>
                    <span class="baloon-body-name">Адрес:</span>
                    <span class="baloon-body-value">{{address}}</span>
                  </div>
                  <div class="baloon-body-row">
                    <i class="baloon-icon-flag baloon-icon"></i>
                    <span class="baloon-body-name">Кухня:</span>
                    <span class="baloon-body-value">{{kitchen}}</span>
                  </div>
                  <div class="baloon-body-row">
                    <i class="baloon-icon-user baloon-icon"></i>
                    <span class="baloon-body-name">Шеф:</span>
                    <span class="baloon-body-value">{{chif}}</span>
                  </div>
                </div>
              </div>
            </li>
            {{/each}}
          </ul>
        </div>
    </div>
  </div>
</template>
<script>
  return {
    data: function () {
          if (app.views.current.selector == '#home') {
            currentEnding = '-home';
        } else {
            currentEnding = '-rest';
        }
        var items = [];
        for (var i = 1; i <= 100; i++) {
          items.push({
            id: i
          });
        }
        return {
          items: items,
          ending: currentEnding,
        };
    },
    on: {
      pageBeforeRemove: function () {
        var self = this;
        // Destroy popup when page removed
        self.virtualList.destroy();
        if (self.popup) self.popup.destroy();
    },
    pageInit: function() {
      var self = this;
      self.virtualList = self.$app.virtualList.create({
        // List Element
        el: self.$el.find('.tooltip_templates'),
        // Pass array with items
        items: self.items,
        // Item height
        // height: 73,
        // Render external function
        renderExternal: function() {
          app.request.json(self.$root.infoMapRest, function (data) {
            self.$setState({
              item: data
            });
          });
        },
      });
    }
    }
  }
</script>
